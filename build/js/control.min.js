/*! estudy version1.1.0  2016-11-29  03:00:50*/
var LocalStorage={ifsupport:!!window.localStorage,setItem:function(a,b){try{window.localStorage.setItem(a,b)}catch(c){}},getItem:function(a){try{return window.localStorage.getItem(a)}catch(b){return null}},removeItem:function(a){try{window.localStorage.removeItem(a)}catch(b){}},checkStorage:function(a,b){},appendItem:function(a,b){try{var c=window.localStorage.getItem(a);if(!c)return void this.setItem(a,b);var d=c.length>0?c.split(","):[];if(d.length>2)for(var e=0;e<d.length-2;e++){var f=d.shift();f!==b&&(this.removeItem(f+"_subtitle"),this.removeItem(f+"_remainTitles"),this.removeItem(f+"_SUBTITLEAXIS"),this.removeItem(f+"_SUBTITLEAXIS_REMAIN"))}c=d.join(","),c.indexOf(b)<0&&d.push(b),window.localStorage.setItem(a,d.join(","))}catch(g){}}},Cookie={set:function(a,b,c){this.remove(a);var d="";if(c){var e=(new Date).getTime();e+=c,d=";expires="+new Date(e).toGMTString()}var f=";domain=yxgapp.com";document.cookie=a+"="+encodeURIComponent(b)+d+f},get:function(a){if(document.cookie.length>0){var b=document.cookie.indexOf(a+"=");if(b>-1){b=b+a.length+1;var c=document.cookie.indexOf(";",b);return c===-1&&(c=document.cookie.length),decodeURIComponent(document.cookie.substring(b,c))}}return""},remove:function(a){if(document.cookie.length>0)for(var b=document.cookie.split(";"),c=0;c<b.length;c++){var d=b[c].split("=");if(d[0]===a){b.pop(c);break}}}},videoPlayer={init:function(a,b){this.containerId=a,this.container=$("#"+this.containerId);var c=this.container.width(),d=9*c/16;this.container.height(d),this.video=$(this.container).find("video")[0],this.options=b,this.userInfo=b.userInfo,this.controlBtn=$(this.container).find(".play-btn")[0],this.trigger=$(this.container).find(".video-trigger")[0],this.mask=$(this.container).find(".video-mask")[0],this.startPlay=!1,$(this.video).attr("preload","auto"),this.videoId=this.options.videoId,this.getData(),this.requestTime=0,this.startTime=0},changeVideo:function(a,b){this.dataIsok=!1,this.startPlay=!1,this.videoId=b,this.currentTime=0,this.totalTime=0,this.data=a},initData:function(a,b){a.result.result?this.dataIsok||(this.dataIsok=!0,this.data=a.video,this.options.onDataok&&this.options.onDataok(this.data),this.eventIfOk||(this.eventIfOk=!0,this.addEvent()),this.initPlayer(),b&&b(a)):this.options.onDataError&&this.options.onDataError(a)},getData:function(){var a="http://m.yxgapp.com/d/mooc/GetVideo.json",b=this,c={videoId:this.videoId,token:this.userInfo.token,username:this.userInfo.username};b.requestTime++,$.ajax({url:a,data:c,dataType:"json",success:function(a){b.initData(a)},error:function(){b.requestTime<3&&setTimeout(function(){b.getData()},2e3)}})},initPlayer:function(){this.poster=document.createElement("img"),this.poster.src=this.data.coverUrl,$(this.video).after(this.poster),this.video.src=this.data.url,this.video.load(),$(this.video).show(),this.totalTime=this.data.durationHour,this.options.autoPlay&&this.video.play()},addEvent:function(){function a(a,b){var c=Array.prototype.slice.call(arguments).slice(2);return function(d){return b.apply(a,[d||window.event].concat(c))}}var b=this;$(this.controlBtn).on("click",function(){return b.play(),!1}),$(this.trigger).on("mouseenter",function(a){b.showControl()}),$(this.trigger).on("mouseleave",function(a){b.hideControl()}),$(this.trigger).on("click",function(){b.showControl()});var c={play:"onPlay",pause:"onPause",timeupdate:"onTimeUpdate",error:"onError",ended:"onEnded",seeking:"onSeeking",seeked:"onSeeked",waiting:"onWating"};for(var d in c){var e=a(this,this[c[d]]);$(this.video).on(d,e)}},hideControl:function(){this.startPlay&&!this.video.paused&&"none"!==$(this.controlBtn).css("display")&&($(this.controlBtn).fadeOut(),$(this.mask).fadeOut())},showControl:function(){this.startPlay&&($(this.controlBtn).fadeIn(),$(this.mask).fadeIn())},showLoading:function(){$(".loading")&&$(".loading").show()},hideLoading:function(){$(".loading")&&$(".loading").hide()},changeBtnState:function(a){a?($(this.trigger).removeClass("playbtn"),$(this.trigger).addClass("pausebtn")):($(this.trigger).addClass("playbtn"),$(this.trigger).removeClass("pausebtn"))},removeEvent:function(){},onPlay:function(){this.startPlay=!0,$(this.poster).fadeOut("slow"),this.changeBtnState(!0),this.hideControl()},onPlaying:function(){},onEnded:function(){this.showControl(),this.changeBtnState(!1),$(this.poster).show(),this.options.onEnd&&this.options.onEnd()},onPause:function(){this.changeBtnState(!1),this.showControl()},onWating:function(){this.showLoading()},onTimeUpdate:function(){this.hideLoading(),this.currentTime=this.video.currentTime,this.options.onUpdate?this.options.onUpdate(this.video.currentTime):""},onError:function(){alert("the video play is error")},onSeeking:function(a){},onSeeked:function(a){this.showLoading()},play:function(){$(this.poster).fadeOut("slow"),this.startPlay?this.video.paused?this.video.play():this.video.pause():(this.startTime>0&&(this.video.currentTime=this.startTime,this.startTime=0),this.video.play())},pause:function(){this.video.pause()},isPause:function(){return this.video.paused},seek:function(a,b){this.video.currentTime=a,b&&b(this.currentTime),this.video.play()},setStartTime:function(a){this.startTime=a}},subtitle={init:function(a,b){this.container=$("#"+a),this.videoId=b.videoId,this.dataOk=!1,this.options=b,this.userInfo=b.userInfo,this.storeKey=this.videoId+"_subtitle",this.remainKey=this.videoId+"_remainTitles",this.requestTime=0,this.showNum=5,videoPlayer&&(this.player=videoPlayer),this.params={videoId:this.videoId,token:this.userInfo.token,username:this.userInfo.username};var c=this.storeKey;if(LocalStorage.getItem(c)){var d=JSON.parse(LocalStorage.getItem(c));d?(this.version=d.version,this.data=d):this.version=-1}else this.version=-1;this.initRemainTitle(),LocalStorage.appendItem("videos",this.videoId),this.getData()},getData:function(){this.requestTime++;var a="http://m.yxgapp.com/mooc/"+this.params.videoId+"/DownloadSubtitle.json?"+(new Date).getTime(),b=this,c=this.params;c.version=this.version,$.ajax({url:a,dataType:"json",data:c,success:function(a){b.getCallback(a)},error:function(){b.requestTime<3&&setTimeout(function(){b.getData()},2e3)}})},getCallback:function(a){a.result.result?(a.subtitle.subtitleItems=this.handleItems(a.subtitle.subtitleItems,a.subtitle.subtitleTimestamp),this.version===-1?(this.data=a.subtitle,this.version=a.subtitle.subtitleTimestamp,a.subtitle.version=this.version,this.dataOk=!0,this.initData()):(this.checkLocalData(a.subtitle),this.initData()),LocalStorage.setItem(this.storeKey,JSON.stringify(this.data))):this.options&&this.options.errorFun?this.options.errorFun(a.result):alert("登录失效，请重新登录")},initData:function(){this.options.onDataok&&this.options.onDataok(this.data),this.totalNum=this.data.subtitleItems.length,this.curIndex=this.data.subtitleItems[0]?0:this.getNextIndex(0),this.pIndex=0,this.unComplateIndex=0,this.curEndTime=this.data.subtitleItems[this.curIndex].endTime/1e3,this.createSubtitle(this.data.subtitleItems),this.setCheckTimer(),this.totalDom=this.liDomList.length,this.addEvent(),this.setPositionParams(),this.scrollToUncomplete()},initRemainTitle:function(){if(LocalStorage.getItem(this.remainKey)){var a=JSON.parse(LocalStorage.getItem(this.remainKey));a?this.remainSubtitles=a:this.remainSubtitles=[]}else this.remainSubtitles=[]},setPositionParams:function(){this.lineHeight=$(this.liDomList[0]).outerHeight(),this.showNum=parseInt(this.container.height()/this.lineHeight)},queueItems:function(a){for(var b=a.length,c=new Array(b),d=0;d<b;d++){var e=this.checkItem(a[d]);c[e.index-1]=e}return c},handleItems:function(a,b,c){for(var d=0,e=a.length,f=[];d<e;d++){var g={};g.id=a[d].id,g.startTime=a[d].startTime,g.endTime=a[d].endTime,g.index=d+1,g.version=b,g.isDifficult=a[d].isDifficult;var h=a[d].data,i=h.length;0===i?(g.baseSubtitleItem=null,g.extSubtitleItem=null):1===i?(g.baseSubtitleItem=h[0],g.baseSubtitleItem.isDifficult=3,g.extSubtitleItem=null):(g.baseSubtitleItem=h[0],g.extSubtitleItem=h[1],g.baseSubtitleItem.isDifficult=3,g.extSubtitleItem.isDifficult=3),g=this.checkItem(g),"英文"===g.baseSubtitleItem.language?g.baseSubtitleItem.language="en":"","中文"===g.extSubtitleItem.language?g.extSubtitleItem.language="zh":"",f.push(g)}return f},checkItem:function(a){return a.sTime=this.getTimeModel(a.startTime),a.eTime=this.getTimeModel(a.endTime),a.baseSubtitleItem||(a.baseSubtitleItem={subtitleItemId:a.id,historyType:1,content:"",isDifficult:3,autoCaption:0,language:"en"}),a.extSubtitleItem||(a.extSubtitleItem={subtitleItemId:a.id,historyType:2,content:"",isDifficult:3,autoCaption:0,language:"zh"}),a},scrollToUncomplete:function(){var a=$(this.liDomList[this.unComplateIndex]).attr("data-index"),b=this.data.subtitleItems[parseInt(a)].startTime/1e3;videoPlayer.setStartTime(b),this.changeCurItem(this.unComplateIndex),$(this.liDomList[this.unComplateIndex]).find(".ch-area").focus()},checkLocalData:function(a){for(var b=a.subtitleItems,c=b.length,d=0;d<c;d++){var e=b[d],f=e.index-1;this.data.subtitleItems[f];e.version>this.data.subtitleItems[f].version&&(e=this.checkItem(e),this.data.subtitleItems[f]=e)}a.version>this.data.version&&(this.data.version=a.version,this.version=a.version)},getNextIndex:function(a){for(var b=!1,c=a+1;!b&&c<this.totalNum;)this.data.subtitleItems[c]?b=!0:c++;return c},addEvent:function(){if(!this.eventOk){this.eventOk=!0;var a=this;this.container.delegate("li","click",function(b){return a.changeIndex($(this),b),!1}),this.container.delegate(".ch-area","click",function(b){return a.chClick($(this),b),!1}),this.container.delegate(".ch-area","focus",function(b){return a.edit=!0,a.editType="zh",!1}),this.container.delegate(".ch-area","blur",function(b){return a.chBlur($(this),b),!1}),this.container.delegate(".en-txt","dblclick",function(b){return a.enClick($(this),b),!1}),this.container.delegate(".en-area","blur",function(b){return a.enBlur($(this),b),!1}),this.addKeyDownEvent()}},addKeyDownEvent:function(){var a=this;document.onkeydown=function(b){var c=b||window.event||arguments.callee.caller.arguments[0];c.shiftKey&&9==c.keyCode?a.tabClick(b,!1):c&&9==c.keyCode&&a.tabClick(b,!0)}},tabClick:function(a,b){var c=0;c=b?this.pIndex+1<this.totalDom?this.pIndex+1:this.pIndex:this.pIndex-1>=0?this.pIndex-1:this.pIndex;var d=$(this.liDomList[c]),e=d.find(".ch-area");return c===this.pIndex?void e.focus():void e.click()},changeIndex:function(a,b){var c=this.player.isPause();return c&&this.seekVideo(a.attr("data-index")),this.changeCurItem(a.attr("data-pindex"),b),!1},chClick:function(a,b){return this.edit=!0,this.editType="zh",this.changeIndex(a,b),!1},chBlur:function(a,b){this.edit=!1,this.editType=null;var c=parseInt(a.attr("data-index")),d=this.data.subtitleItems[c],e=this.fillStr(a.val());a.val(e),d.extSubtitleItem.content!==e&&(d.extSubtitleItem.content=e,d.extSubtitleItem.updateTime=parseInt((new Date).getTime()/1e3),d.extSubtitleItem.username=this.userInfo.username,d.extSubtitleItem.userNickname=this.userInfo.nickname,d.extSubtitleItem.autoCaption=0,d.extSubtitleItem.isDifficult=3,this.saveSubtitle(d.extSubtitleItem,c))},enClick:function(a,b){return this.edit=!0,this.editType="en",val=a.text(),a.hide(),a.siblings(".en-area").val(val).show().focus(),this.changeIndex(a,b),!1},enBlur:function(a,b){if(this.edit=!1,this.editType=null,val=this.fillStr(a.val()),a.hide(),a.siblings(".en-txt").text(val).show(),/.*\u4e00-\u9fa5+.*$/.test(val))return void a.siblings(".en-txt").addClass("en-error");a.siblings(".en-txt").removeClass("en-error");var c=parseInt(a.attr("data-index")),d=this.data.subtitleItems[c].baseSubtitleItem;d.content!==val&&""!==val&&(d.content=val,d.updateTime=parseInt((new Date).getTime()/1e3),d.autoCaption=0,d.username=this.userInfo.username,d.userNickname=this.userInfo.nickname,d.isDifficult=3,this.saveSubtitle(d,c))},changByTime:function(a){if(this.edit&&this.curEndTime<a&&this.player.pause(),!this.edit&&this.curEndTime<a&&this.pIndex+1<this.totalDom){var b=this.pIndex+1;this.changeCurItem(b)}},changeCurItem:function(a,b){a=parseInt(a),$(this.liDomList[this.pIndex]).removeClass("active");var c=$(this.liDomList[a]);c.addClass("active");var d=parseInt(c.attr("data-index"));this.curEndTime=this.data.subtitleItems[d].endTime/1e3,this.scroll(a),b?this.seekVideo(d):"",this.curIndex=d,this.pIndex=a},scroll:function(a){var b=0===a?0:(a-1)*this.lineHeight;this.container.mCustomScrollbar("scrollTo",b)},seekVideo:function(a){var b=this.data.subtitleItems[a].startTime;this.player.seek(b/1e3)},getTimeModel:function(a){var b=parseInt(a/1e3),c=parseInt(b/60),d=parseInt(c/60);return c=c>9?c:"0"+c,b%=60,_secondStr=b>9?b:"0"+b,d>0?d+":"+c+":"+_secondStr:c+":"+_secondStr},fillStr:function(a){return a=a.replace(/^\s+|\s+$/g,""),a=a.replace(/^\n+|\n+$/g,"")},createSubtitle:function(a){var b=a.length;this.ulDom=0===this.container.find("ul").length?$(document.createElement("ul")):$(this.container.find("ul")[0]),this.ulDom.css({positon:"relative",top:0,left:0});for(var c=0,d=0;d<b;d++){var e=document.createElement("li"),f=[],g=a[d];if(g){var h=g.index;$(e).attr("data-pindex",c),$(e).attr("data-index",h-1),d===this.curIndex&&$(e).addClass("active"),f.push('<div class="trans-en">'),f.push('<div class="sign clearfix">'),f.push('<div class="gather circle fl"></div>'),f.push('<span class="dur-time fl">'+g.sTime+"</span>"),g.baseSubtitleItem&&(1===g.baseSubtitleItem.autoCaption?f.push('<div class="gather auto fl"></div>'):f.push(""),f.push("</div>"),f.push('<div data-index="'+(h-1)+'" data-pindex = "'+c+'" class="en-txt">'+g.baseSubtitleItem.content+"</div>"),f.push('<textarea class="en-area" data-index="'+(h-1)+'"data-pindex = "'+c+'"></textarea>'),f.push("</div>")),f.push('<div class="trans-ch"><div class="sign clearfix">'),f.push('<div class="gather circle fl"></div>'),g.extSubtitleItem&&(2===g.extSubtitleItem.isDifficult?f.push('<div class="gather square fl"></div>'):f.push(""),f.push("</div>"),f.push('<textarea data-index = "'+(h-1)+'" data-pindex = "'+c+'" class="ch-area"'),f.push(">"),f.push(g.extSubtitleItem.content+"</textarea>"),f.push("</div>")),$(e).html(f.join("")),""===g.extSubtitleItem.content&&0===this.unComplateIndex&&(this.unComplateIndex=c),this.ulDom.append(e),c++}}this.container.html(this.ulDom),this.liDomList=this.container.find("li"),this.container.mCustomScrollbar({theme:"my-theme",mouseWheel:{scrollAmount:131}})},postData:function(a,b){if(a&&b&&0!==b.length){var c={};c.token=this.params.token,c.username=this.params.username,c.videoId=this.params.videoId,c.version=a,c.newSubtitle=JSON.stringify(b),c.from=3;var d=this;$.ajax({url:"http://m.yxgapp.com/d/mooc/UpdateSubtitle.json",data:c,type:"POST",dataType:"json",success:function(a){a.result.result?d.resetSubTitleItems(a):(d.setRemainSubTitles(b),d.options&&d.options.errorFun?d.options.errorFun(a.result):alert("登录失效，请重新扫码登录"))},error:function(a){d.setRemainSubTitles(b)}})}},setCheckTimer:function(){var a=this;this.remainSubtitles.length>0&&(this.postData(this.version,this.remainSubtitles),this.remainSubtitles=[],LocalStorage.removeItem(this.remainKey)),this.timer=setTimeout(function(){a.setCheckTimer()},12e4)},setRemainSubTitles:function(a){for(var b=this.remainSubtitles.length,c=a.length,d=0;d<c;d++){for(var e=(a[d].id,!1),f=0;f<b;f++)if(this.remainSubtitles[f].id===a[d].id){this.remainSubtitles[f]=a[d],e=!0;break}e||this.remainSubtitles.push(a[d])}LocalStorage.setItem(this.remainKey,JSON.stringify(this.remainSubtitles))},saveSubtitle:function(a,b){"en"===a.language?this.data.subtitleItems[b].baseSubtitleItem=a:this.data.subtitleItems[b].extSubtitleItem=a,this.data.subtitleItems[b].version=this.data.version,LocalStorage.setItem(this.storeKey,JSON.stringify(this.data));var c=this.data.version,d=[];d.push(a),this.postData(c,d)},resetSubTitleItems:function(a){this.data.version=a.timestamp,this.version=this.data.version,LocalStorage.setItem(this.storeKey,JSON.stringify(this.data))},getStatus:function(){var a=this.params;a.subtitleTimestamp=Math.ceil((new Date).getTime()/1e3);var b=this;$.ajax({url:"http://m.yxgapp.com/d/mooc/GetStaticSubtitleState.json",data:a,type:"GET",dataType:"json",success:function(a){a.result},error:function(){b.getData()}})},resetOption:function(){}},contentControl={init:function(a,b){this.getUserInfo(),this.showUserInfo();var c=this,d={errorFun:function(){c.showErrorNote()},onDataok:function(){c.subTitleOK=!0,c.videoOk&&c.hideLoadNote()},userInfo:this.userInfo,videoId:this.videoId};b.init("js_tranList",d);var e={onStartPlay:null,onEnd:function(){b.resetOption()},onError:null,onDataError:null,onPause:null,onDataok:function(a){c.videoData=a,c.videoOk=!0,c.showVideoInfo(c.videoData),c.subTitleOK&&c.hideLoadNote()},onUpdate:function(a){b.changByTime(a)},userInfo:this.userInfo,videoId:this.videoId};a.init("video_container",e),this.getCourseData(),this.courseRequestTime=0},showLoadNote:function(a){$("#js_mask").show(),a&&$("#js_note .layui-layer-content").html(a),$("#js_note .layui-layer-btn").hide(),$("#js_note").show()},hideLoadNote:function(){$("#js_mask").hide(),$("#js_note").hide()},showErrorNote:function(a){this.hideLoadNote(),a=a?a:"登陆状态失效，请重新扫描二维码进行登录";var b="http://t.yxgapp.com/index.html";$("#js_mask").show();var c=$("#js_note .layui-layer-btn0");$("#js_note .layui-layer-content").html(a);c.html("前往扫描二维码"),c.attr("href",b),$("#js_note .layui-layer-btn").show(),$("#js_note").show(),window.tokenError=!0},showUserInfo:function(a){this.userInfo.avatarUrl&&"null"!=this.userInfo.avatarUrl&&$("#js_userpic").attr("src",this.userInfo.avatarUrl);var b=this.userInfo.nickname&&"null"!=this.userInfo.nickname?this.userInfo.nickname:"";$("#js_nickname").html(b)},getCourseData:function(){var a={};this.courseRequestTime++,a.username=this.userInfo.username,a.token=this.userInfo.token,a.courseId=this.courseId,a.command="command_detail";var b=this;$.ajax({url:"http://m.yxgapp.com/d/mooc/PutOpenCourseRecord.json",data:a,type:"GET",dataType:"json",success:function(a){b.showCourseInfo(a)},error:function(a){this.courseRequestTime<3?b.getCourseData():b.showLoadNote("网络不通畅，请检查之后刷新页面")}})},showCourseInfo:function(a){a.result.result?(this.courseData=a.data,this.courseData.videoNumber>1?$("#js_coursetitle").html(this.courseData.name):$("#js_coursetitle").html(this.courseData.enName),this.showUniversity()):this.showErrorNote()},showUniversity:function(){if(this.courseData.joinNumber&&$("#js_joinCount").html(this.courseData.joinNumber+"次"),this.courseData.university||this.courseData.authors){if(this.courseData.university){var a=document.createElement("img");$(a).attr("src",this.courseData.university.iconUrl);var b=document.createElement("span");$(b).html(this.courseData.university.name);var c=$("#js_courseinfo .unit");c.append(a),c.append(b)}var d=document.createElement("div");$(d).attr("class","teacher-info");var e=$("#js_courseinfo .teacher"),f=document.createElement("img");if(this.courseData.authors.length>0){var g=this.courseData.authors[0];$(f).attr("src",g.iconUrl),$(d).html('<div class="name">'+g.name+'</div><div class="rank">'+g.jobTitle+"</div>"),e.append(f),e.append(d)}else $(d).html('<div style="margin:11px 0 0 4px;" class="name">迷你课</div>'),$(f).attr("src",this.courseData.marketCoverUrl),e.append(f),e.append(d)}else $("#js_courseInfo").hide()},showVideoInfo:function(a){$("#js_videotitle").html(a.name);var b=a.translateInfo,c=b.allTranslateSentencesNumber,d=b.baseSentencesNumber,e=(c/d*100).toFixed(0);$("#js_progress").html(e+"%"),$("#js_total").html(d+"句")},getUserInfo:function(){this.userInfo={},this.userInfo.username=Cookie.get("userId"),this.userInfo.token=Cookie.get("token"),this.courseId=Cookie.get("courseId"),this.videoId=Cookie.get("videoId"),this.userInfo.nickname=Cookie.get("nickname"),this.userInfo.avatarUrl=Cookie.get("avatarUrl")},showNote:function(a,b,c){var d=$("#js_note1");if(d.find(".layui-layer-content").html(a),$("#js_mask").show(),c){var e=d.find(".layui-layer-btn0"),f=this;e.show(),e.on("click",function(){f.hideNote(),c()})}else d.find(".layui-layer-btn0").hide();d.show()},hideNote:function(a){$("#js_mask").hide();var b=$("#js_note1");b.hide()},checkSupport:function(){var a=["您的浏览器版本较低，请更换为Chrome或者Firefox最新版本再来使用。","注意：我们未对您的浏览器进行过兼容性测试，使用过程中可能会存在问题，建议使用Chrome或者Firefox浏览器最新版本。"];if(!window.localStorage||!window.localStorage.setItem)return this.hideLoadNote(),this.showNote(a[0]),!1;var b=window.navigator.userAgent;if(b.indexOf("Chrome")<0&&b.indexOf("Safari")<0&&b.indexOf("Firefox")<0){var c=this,d=function(){c.hideNote(),c.showLoadNote(),c.init(videoPlayer,subtitle)};return this.showNote(a[1],{},d),!1}return this.init(videoPlayer,subtitle),!0}};window.onload=function(){contentControl.checkSupport(),$(document).on("visibilitychange",function(){document.hidden&&videoPlayer.pause()})},window.onbeforeunload=function(){if(subtitle.remainSubtitles.length>0&&!windows.tokenError)return"当前尚有字幕未同步到平台，离开可能会导致数据丢失，是否确认离开？"},window.onblur=function(){videoPlayer.pause()};